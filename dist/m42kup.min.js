var m42kup=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";const n=t=>(t+"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]));function o(){}function i(t){t.prototype=Object.create(o.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,enumerable:!1,writable:!0})}function a(t){if("string"!=typeof t)throw TypeError("text not string");this.text=t}function s({html:t,display:e}){if("string"!=typeof t)throw TypeError("html not string");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');this.html=t,this.display=e}function l({message:t,code:e}){if("string"!=typeof t)throw TypeError("message not string");if("string"!=typeof e)throw TypeError("code not string");this.message=t,this.code=e}function c({name:t,display:e,render:r,split:n}){if(!t)throw TypeError("You give arg0 a bad name");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');if(!(r instanceof Function))throw TypeError("arg0.render should be a function");if([this.name,this.display]=[t,e],this.render=(t,e)=>{if(!(t instanceof h))throw TypeError("arg0 should be an instance of m42kup.renderer.Element");return r(t,e)},void 0!==n){if("string"==typeof n&&(n=[n]),!(n instanceof Array))throw TypeError("arg0.split should be either undefined, a string, or an array");if(!n.length)throw TypeError("arg0.split.length == 0");this.split=n}}function h({name:t,display:e,render:r,code:o,attributes:i,children:c,split:u,options:p}){if(!t)throw TypeError("You give arg0 a bad name");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');if(!(r instanceof Function))throw TypeError("arg0.render should be a function");if("string"!=typeof o)throw TypeError("You give arg0 a bad code");if(!(i instanceof Array))throw TypeError("attributes should be an array");if((()=>{var t=e=>e instanceof h||e instanceof a||e instanceof l||e instanceof Array&&e.every(t);if(!c.every(t))throw TypeError("All arg0.children should either be an Element, a TextNode, or an ErrorNode")})(),void 0!==u){if("string"==typeof u&&(u=[u]),!(u instanceof Array))throw TypeError("arg0.split should be either undefined, a string, or an array");if(!u.length)throw TypeError("arg0.split.length == 0");this.split=u}var f,d;[this.name,this.display,this.code,this.attributes,this.children]=[t,e,o,i,c],this.innerIsText=(f=u?u.length:0,(d=(t,e)=>e>0?t.map(t=>d(t,e-1)):t.map(t=>t instanceof a||!(t instanceof l)&&t.outerIsText).every(t=>t))(c,f)),this.innerText=(()=>{var t=u?u.length:0,e=(t,r,n)=>r>0?t.map((t,o)=>e(t,r-1,n[o])):n?t.map(t=>t instanceof a?t.text:t.outerText).join(""):null;return e(c,t,this.innerIsText)})(),this.innerHtml=(()=>{var t=u?u.length:0,e=(t,r,o,i)=>{if(r>0)return t.map((t,n)=>e(t,r-1,o[n],i[n]));if(o)return i.trim()&&"container-block"==this.display?i.split(/(?:\r\n[ \t]*){2,}|(?:\r[ \t]*){2,}|(?:\n[ \t]*){2,}/).filter(t=>!!t.trim()).map(n).map(t=>`<p>${t}</p>`).join(""):n(i);if("container-block"!=this.display)return t.map(t=>t instanceof a?n(t.text):t instanceof l?t.toHtml():t.outerHtml).join("");var s=[],c=[],h=()=>{c.length&&(s.push(c),c=[])},u=t=>c.push(t);return t.forEach(t=>{if(t instanceof a){var e=t.text.split(/(?:\r\n[ \t]*){2,}|(?:\r[ \t]*){2,}|(?:\n[ \t]*){2,}/);if(e.length<2)return u(t);e.forEach((t,r)=>{t.trim()&&u(this.text(t)),r<e.length-1&&h()})}else t instanceof l?u(t):"inline"!=t.display?(h(),s.push(t),h()):u(t)}),h(),s.map(t=>t instanceof Array?"<p>"+t.map(t=>t instanceof a?n(t.text):t instanceof l?t.toHtml():t.outerHtml).join("")+"</p>":t.outerHtml).join("")};return e(c,t,this.innerIsText,this.innerText)})();var m=r(this,p);if(this.outerIsText=m instanceof a,this.outerText=this.outerIsText?m.text:null,this.isError=m instanceof l,this.errorMessage=m instanceof l?m.message:null,this.outerIsText)this.outerHtml=n(this.outerText);else if(m instanceof s)this.outerHtml=m.html;else{if(!(m instanceof l))throw TypeError("Render output should be one of TextNode, HtmlNode, or ErrorNode");this.outerHtml=m.toHtml()}}i(a),a.prototype.toString=function(){return this.toIndentedString(0)},a.prototype.toIndentedString=function(t){return"\t".repeat(t)+`Text {${JSON.stringify(this.text)}}`},i(s),s.prototype.toString=function(){return this.toIndentedString(0)},s.prototype.toIndentedString=function(t){var e=["display"].map(t=>t+"="+JSON.stringify(this[t])).join(" ");return"\t".repeat(t)+`Html(${e}) {${JSON.stringify(this.html)}}`},i(l),l.prototype.toHtml=function(){return`<code class="m42kup-error" title="Error: ${n(this.message)}">${n(this.code)}</code>`},l.prototype.toString=function(){return this.toIndentedString(0)},l.prototype.toIndentedString=function(t){var e=["message","code"].map(t=>t+"="+JSON.stringify(this[t])).join(" ");return"\t".repeat(t)+`Error(${e})`},c.prototype.instantiate=function({code:t,attributes:e,children:r,options:n}){if(!(this instanceof c))throw Error("ElementClass.prototype.instantiate should be called as a method of an ElementClass instance");return new h({name:this.name,display:this.display,render:this.render,code:t,attributes:e,children:r,split:this.split,options:n})},i(h),h.prototype.text=function(t){return new a(t)},h.prototype.html=function(t){return new s({html:t,display:this.display})},h.prototype.error=function(t){return new l({message:`[${this.name}]: ${t}`,code:this.code})},h.prototype.getAttribute=function(t){for(var e=0;e<this.attributes.length;e++)if(this.attributes[e].name==t)return this.attributes[e].value;return null},h.prototype.toString=function(){return this.toIndentedString(0)},h.prototype.toIndentedString=function(t){var e=["display","code","attributes","split","isError","errorMessage","innerIsText","innerText","innerHtml","outerIsText","outerText","outerHtml"].map(t=>t+"="+("string"==typeof this[t]||this[t]instanceof Array?JSON.stringify(this[t]):this[t]+"")).join("\n"+"\t".repeat(t+1)),r=this.children.map(e=>e.toIndentedString(t+1)).join(",\n");return"\t".repeat(t)+`Element[${JSON.stringify(this.name)}](\n`+`${"\t".repeat(t+1)}${e}\n`+"\t".repeat(t)+") {\n"+r+"\n"+"\t".repeat(t)+"}"},h.prototype.escapeHtml=n,t.exports={Node:o,TextNode:a,HtmlNode:s,ErrorNode:l,ElementClass:c,Element:h}},function(t,e){function r(t){var e={};for(var r in t)e[r]=t[r];return e}function n(t){var e={};return t.tags&&(e.tags=r(t.tags)),t.hljs&&(e.hljs=t.hljs),t.katex&&(e.katex=t.katex),e}function o(t,e){for(var n in t=r(t),e)t[n]=e[n];return t}t.exports={copyOptions:n,tags:o,options:function(t,e){if("object"!=typeof t||"object"!=typeof e)throw TypeError("One of the options provided is not an object");return t=n(t),e.tags&&(t.tags||(t.tags={}),t.tags=o(t.tags,e.tags)),e.hljs&&(t.hljs=e.hljs),e.katex&&(t.katex=e.katex),t}}},function(t,e,r){var n=r(3),o=r(5),i=r(7),a=r(1),s=r(8),l={};var c={parser:n,renderer:o,highlighter:i,ast2nt:function(t,e){return e||(e={}),e.tags||(e.tags={}),e=a.options(l,e),o.ast2nt(t,e)},render:function(t,e){t+="",e||(e={}),e.tags||(e.tags={}),e=a.options(l,e);var r=n.input2pt(t),i=n.pt2ast(r);return o.ast2nt(i,e).outerHtml},highlight:function(t){t+="";var e=n.input2pt(t);return i.pt2hl(e)},cascade:function(t){if("object"!=typeof t)throw TypeError("typeof options != 'object'");l=a.options(l,t)},set:function(t){if("object"!=typeof t)throw TypeError("typeof options != 'object'");l=t},addCodeMirrorMode:s};t.exports=c},function(t,e,r){var n=r(4);t.exports={input2pt:function(t){var e=n.parse(t);return e.input=t,e},pt2ast:function(t){var e=t.input,r=function t(r){var n=r.map(r=>{switch(r.type){case"text":return{type:"text",text:r.text};case"verbatim":return{type:"text",text:r.child.text};case"element":var n="parenthesis"!=r.attributes._type?[]:r.attributes.content.filter(({_type:t})=>"attribute"==t).map(({attribute:t})=>({name:t[0],value:t[3]}));return{type:"element",name:r.name,attributes:n,code:e.substring(r.location.start.offset,r.location.end.offset),children:t(r.children)};default:throw new TypeError("Unknown type: "+r.type)}});return n=n.reduce((t,e)=>{if("text"==e.type){if(!e.text)return t;if(t.length&&"text"==t[t.length-1].type)return t[t.length-1].text+=e.text,t}return t.push(e),t},[])}(t.root.children);return{input:t.input,root:{type:"root",children:r,code:e}}}}},function(t,e,r){"use strict";function n(t,e,r,o){this.message=t,this.expected=e,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var e,n,o,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(o=t[e],r[o.type](o));if(i.sort(),i.length>0){for(e=1,n=1;e<i.length;e++)i[e-1]!==i[e]&&(i[n]=i[e],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:function(t,e){e=void 0!==e?e:{};var r,o={},i={start:gt},a=gt,s=ht("[",!1),l=ht("<",!1),c=ht("!",!1),h=ht('"',!1),u=ht("#",!1),p=ht("$",!1),f=ht("%",!1),d=ht("&",!1),m=ht("'",!1),g=ht(")",!1),y=ht("*",!1),A=ht("+",!1),v=ht(",",!1),b=ht("-",!1),x=ht("/",!1),T=ht(";",!1),C=ht("=",!1),E=ht(">",!1),w=ht("?",!1),k=ht("@",!1),$=ht("\\",!1),j=ht("^",!1),S=ht("_",!1),H=ht("{",!1),I=ht("|",!1),_=ht("}",!1),N=ht("~",!1),O=/^[a-z]/,U=ut([["a","z"]],!1,!1),q=/^[a-z0-9]/,z=ut([["a","z"],["0","9"]],!1,!1),R=ht(":",!1),M=function(t,e,r,n){return":"+r+n.join("")},F=ht("(",!1),B=/^[a-z0-9\-]/,Q=ut([["a","z"],["0","9"],"-"],!1,!1),P={type:"any"},J=function(t,e,r,n,o,i){return[r,n,o,i]},D=/^['"()[\] \t\n\r]/,L=ut(["'",'"',"(",")","[","]"," ","\t","\n","\r"],!1,!1),Y=function(t,e,r,n){return[r,"",n,""]},G=function(t,e,r){return{_type:"attribute",attribute:[e].concat(r)}},K=function(t,e){return{_type:"whitespace",whitespace:e}},V=function(t,e){return{_type:"error",error:e}},W=ht(".",!1),X=ht("]",!1),Z=ht("`",!1),tt=function(t){return{type:"text",text:t.join(""),location:ct()}},et=/^[ \t\n\r]/,rt=ut([" ","\t","\n","\r"],!1,!1),nt=0,ot=0,it=[{line:1,column:1}],at=0,st=[],lt=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function ct(){return ft(ot,nt)}function ht(t,e){return{type:"literal",text:t,ignoreCase:e}}function ut(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function pt(e){var r,n=it[e];if(n)return n;for(r=e-1;!it[r];)r--;for(n={line:(n=it[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return it[e]=n,n}function ft(t,e){var r=pt(t),n=pt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function dt(t){nt<at||(nt>at&&(at=nt,st=[]),st.push(t))}function mt(t,e,r){return new n(n.buildMessage(t,e),t,e,r)}function gt(){var t,e;return t=nt,(e=yt())!==o&&(ot=t,e={root:{type:"root",children:e,location:ct()}}),t=e}function yt(){var t,e;for(t=[],e=At();e!==o;)t.push(e),e=At();return t}function At(){var e;return(e=function(){var e,r,n,i,a,s;e=nt,(r=function(){var t,e;t=nt,(e=vt())!==o&&(ot=t,r=e,wt.push(r.length),e=r);var r;return t=e}())!==o&&(n=function(){var e,r,n,i,a,s,l,F,B,Q;e=nt,r=[],33===t.charCodeAt(nt)?(n="!",nt++):(n=o,0===lt&&dt(c));if(n!==o)for(;n!==o;)r.push(n),33===t.charCodeAt(nt)?(n="!",nt++):(n=o,0===lt&&dt(c));else r=o;if(r===o){if(r=[],34===t.charCodeAt(nt)?(n='"',nt++):(n=o,0===lt&&dt(h)),n!==o)for(;n!==o;)r.push(n),34===t.charCodeAt(nt)?(n='"',nt++):(n=o,0===lt&&dt(h));else r=o;if(r===o){if(r=[],35===t.charCodeAt(nt)?(n="#",nt++):(n=o,0===lt&&dt(u)),n!==o)for(;n!==o;)r.push(n),35===t.charCodeAt(nt)?(n="#",nt++):(n=o,0===lt&&dt(u));else r=o;if(r===o){if(r=[],36===t.charCodeAt(nt)?(n="$",nt++):(n=o,0===lt&&dt(p)),n!==o)for(;n!==o;)r.push(n),36===t.charCodeAt(nt)?(n="$",nt++):(n=o,0===lt&&dt(p));else r=o;if(r===o){if(r=[],37===t.charCodeAt(nt)?(n="%",nt++):(n=o,0===lt&&dt(f)),n!==o)for(;n!==o;)r.push(n),37===t.charCodeAt(nt)?(n="%",nt++):(n=o,0===lt&&dt(f));else r=o;if(r===o){if(r=[],38===t.charCodeAt(nt)?(n="&",nt++):(n=o,0===lt&&dt(d)),n!==o)for(;n!==o;)r.push(n),38===t.charCodeAt(nt)?(n="&",nt++):(n=o,0===lt&&dt(d));else r=o;if(r===o){if(r=[],39===t.charCodeAt(nt)?(n="'",nt++):(n=o,0===lt&&dt(m)),n!==o)for(;n!==o;)r.push(n),39===t.charCodeAt(nt)?(n="'",nt++):(n=o,0===lt&&dt(m));else r=o;if(r===o){if(r=[],41===t.charCodeAt(nt)?(n=")",nt++):(n=o,0===lt&&dt(g)),n!==o)for(;n!==o;)r.push(n),41===t.charCodeAt(nt)?(n=")",nt++):(n=o,0===lt&&dt(g));else r=o;if(r===o){if(r=[],42===t.charCodeAt(nt)?(n="*",nt++):(n=o,0===lt&&dt(y)),n!==o)for(;n!==o;)r.push(n),42===t.charCodeAt(nt)?(n="*",nt++):(n=o,0===lt&&dt(y));else r=o;if(r===o){if(r=[],43===t.charCodeAt(nt)?(n="+",nt++):(n=o,0===lt&&dt(A)),n!==o)for(;n!==o;)r.push(n),43===t.charCodeAt(nt)?(n="+",nt++):(n=o,0===lt&&dt(A));else r=o;if(r===o){if(r=[],44===t.charCodeAt(nt)?(n=",",nt++):(n=o,0===lt&&dt(v)),n!==o)for(;n!==o;)r.push(n),44===t.charCodeAt(nt)?(n=",",nt++):(n=o,0===lt&&dt(v));else r=o;if(r===o){if(r=[],45===t.charCodeAt(nt)?(n="-",nt++):(n=o,0===lt&&dt(b)),n!==o)for(;n!==o;)r.push(n),45===t.charCodeAt(nt)?(n="-",nt++):(n=o,0===lt&&dt(b));else r=o;if(r===o){if(r=[],47===t.charCodeAt(nt)?(n="/",nt++):(n=o,0===lt&&dt(x)),n!==o)for(;n!==o;)r.push(n),47===t.charCodeAt(nt)?(n="/",nt++):(n=o,0===lt&&dt(x));else r=o;if(r===o){if(r=[],59===t.charCodeAt(nt)?(n=";",nt++):(n=o,0===lt&&dt(T)),n!==o)for(;n!==o;)r.push(n),59===t.charCodeAt(nt)?(n=";",nt++):(n=o,0===lt&&dt(T));else r=o;if(r===o){if(r=[],61===t.charCodeAt(nt)?(n="=",nt++):(n=o,0===lt&&dt(C)),n!==o)for(;n!==o;)r.push(n),61===t.charCodeAt(nt)?(n="=",nt++):(n=o,0===lt&&dt(C));else r=o;if(r===o){if(r=[],62===t.charCodeAt(nt)?(n=">",nt++):(n=o,0===lt&&dt(E)),n!==o)for(;n!==o;)r.push(n),62===t.charCodeAt(nt)?(n=">",nt++):(n=o,0===lt&&dt(E));else r=o;if(r===o){if(r=[],63===t.charCodeAt(nt)?(n="?",nt++):(n=o,0===lt&&dt(w)),n!==o)for(;n!==o;)r.push(n),63===t.charCodeAt(nt)?(n="?",nt++):(n=o,0===lt&&dt(w));else r=o;if(r===o){if(r=[],64===t.charCodeAt(nt)?(n="@",nt++):(n=o,0===lt&&dt(k)),n!==o)for(;n!==o;)r.push(n),64===t.charCodeAt(nt)?(n="@",nt++):(n=o,0===lt&&dt(k));else r=o;if(r===o){if(r=[],92===t.charCodeAt(nt)?(n="\\",nt++):(n=o,0===lt&&dt($)),n!==o)for(;n!==o;)r.push(n),92===t.charCodeAt(nt)?(n="\\",nt++):(n=o,0===lt&&dt($));else r=o;if(r===o){if(r=[],94===t.charCodeAt(nt)?(n="^",nt++):(n=o,0===lt&&dt(j)),n!==o)for(;n!==o;)r.push(n),94===t.charCodeAt(nt)?(n="^",nt++):(n=o,0===lt&&dt(j));else r=o;if(r===o){if(r=[],95===t.charCodeAt(nt)?(n="_",nt++):(n=o,0===lt&&dt(S)),n!==o)for(;n!==o;)r.push(n),95===t.charCodeAt(nt)?(n="_",nt++):(n=o,0===lt&&dt(S));else r=o;if(r===o){if(r=[],123===t.charCodeAt(nt)?(n="{",nt++):(n=o,0===lt&&dt(H)),n!==o)for(;n!==o;)r.push(n),123===t.charCodeAt(nt)?(n="{",nt++):(n=o,0===lt&&dt(H));else r=o;if(r===o){if(r=[],124===t.charCodeAt(nt)?(n="|",nt++):(n=o,0===lt&&dt(I)),n!==o)for(;n!==o;)r.push(n),124===t.charCodeAt(nt)?(n="|",nt++):(n=o,0===lt&&dt(I));else r=o;if(r===o){if(r=[],125===t.charCodeAt(nt)?(n="}",nt++):(n=o,0===lt&&dt(_)),n!==o)for(;n!==o;)r.push(n),125===t.charCodeAt(nt)?(n="}",nt++):(n=o,0===lt&&dt(_));else r=o;if(r===o)if(r=[],126===t.charCodeAt(nt)?(n="~",nt++):(n=o,0===lt&&dt(N)),n!==o)for(;n!==o;)r.push(n),126===t.charCodeAt(nt)?(n="~",nt++):(n=o,0===lt&&dt(N));else r=o}}}}}}}}}}}}}}}}}}}}}}}e=r!==o?t.substring(e,nt):r;if(e===o){if(e=nt,O.test(t.charAt(nt))?(r=t.charAt(nt),nt++):(r=o,0===lt&&dt(U)),r!==o){for(n=nt,i=[],q.test(t.charAt(nt))?(a=t.charAt(nt),nt++):(a=o,0===lt&&dt(z));a!==o;)i.push(a),q.test(t.charAt(nt))?(a=t.charAt(nt),nt++):(a=o,0===lt&&dt(z));if((n=i!==o?t.substring(n,nt):i)!==o){if(i=nt,a=[],s=nt,58===t.charCodeAt(nt)?(l=":",nt++):(l=o,0===lt&&dt(R)),l!==o)if(O.test(t.charAt(nt))?(F=t.charAt(nt),nt++):(F=o,0===lt&&dt(U)),F!==o){for(B=[],q.test(t.charAt(nt))?(Q=t.charAt(nt),nt++):(Q=o,0===lt&&dt(z));Q!==o;)B.push(Q),q.test(t.charAt(nt))?(Q=t.charAt(nt),nt++):(Q=o,0===lt&&dt(z));B!==o?(ot=s,l=M(0,0,F,B),s=l):(nt=s,s=o)}else nt=s,s=o;else nt=s,s=o;for(;s!==o;)if(a.push(s),s=nt,58===t.charCodeAt(nt)?(l=":",nt++):(l=o,0===lt&&dt(R)),l!==o)if(O.test(t.charAt(nt))?(F=t.charAt(nt),nt++):(F=o,0===lt&&dt(U)),F!==o){for(B=[],q.test(t.charAt(nt))?(Q=t.charAt(nt),nt++):(Q=o,0===lt&&dt(z));Q!==o;)B.push(Q),q.test(t.charAt(nt))?(Q=t.charAt(nt),nt++):(Q=o,0===lt&&dt(z));B!==o?(ot=s,l=M(0,0,F,B),s=l):(nt=s,s=o)}else nt=s,s=o;else nt=s,s=o;(i=a!==o?t.substring(i,nt):a)!==o?(ot=e,e=r=r+n+i):(nt=e,e=o)}else nt=e,e=o}else nt=e,e=o;e===o&&(e="")}return e}())!==o&&(i=function(){var e,r,n,i,a,s,l,c,u,p,f,d,y;e=nt,40===t.charCodeAt(nt)?(r="(",nt++):(r=o,0===lt&&dt(F));if(r!==o){if(n=[],i=nt,a=nt,s=[],B.test(t.charAt(nt))?(l=t.charAt(nt),nt++):(l=o,0===lt&&dt(Q)),l!==o)for(;l!==o;)s.push(l),B.test(t.charAt(nt))?(l=t.charAt(nt),nt++):(l=o,0===lt&&dt(Q));else s=o;if((a=s!==o?t.substring(a,nt):s)!==o){if(s=nt,61===t.charCodeAt(nt)?(l="=",nt++):(l=o,0===lt&&dt(C)),l!==o)if(34===t.charCodeAt(nt)?(c='"',nt++):(c=o,0===lt&&dt(h)),c!==o){for(u=nt,p=[],f=nt,d=nt,lt++,34===t.charCodeAt(nt)?(y='"',nt++):(y=o,0===lt&&dt(h)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);f!==o;)p.push(f),f=nt,d=nt,lt++,34===t.charCodeAt(nt)?(y='"',nt++):(y=o,0===lt&&dt(h)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);(u=p!==o?t.substring(u,nt):p)!==o?(34===t.charCodeAt(nt)?(p='"',nt++):(p=o,0===lt&&dt(h)),p===o&&(p=nt,(f=xt())!==o&&(ot=p,f=""),p=f),p!==o?(ot=s,l=J(0,0,l,c,u,p),s=l):(nt=s,s=o)):(nt=s,s=o)}else nt=s,s=o;else nt=s,s=o;if(s===o){if(s=nt,61===t.charCodeAt(nt)?(l="=",nt++):(l=o,0===lt&&dt(C)),l!==o)if(39===t.charCodeAt(nt)?(c="'",nt++):(c=o,0===lt&&dt(m)),c!==o){for(u=nt,p=[],f=nt,d=nt,lt++,39===t.charCodeAt(nt)?(y="'",nt++):(y=o,0===lt&&dt(m)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);f!==o;)p.push(f),f=nt,d=nt,lt++,39===t.charCodeAt(nt)?(y="'",nt++):(y=o,0===lt&&dt(m)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);(u=p!==o?t.substring(u,nt):p)!==o?(39===t.charCodeAt(nt)?(p="'",nt++):(p=o,0===lt&&dt(m)),p===o&&(p=nt,(f=xt())!==o&&(ot=p,f=""),p=f),p!==o?(ot=s,l=J(0,0,l,c,u,p),s=l):(nt=s,s=o)):(nt=s,s=o)}else nt=s,s=o;else nt=s,s=o;if(s===o){if(s=nt,61===t.charCodeAt(nt)?(l="=",nt++):(l=o,0===lt&&dt(C)),l!==o){for(c=nt,u=[],p=nt,f=nt,lt++,D.test(t.charAt(nt))?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(L)),lt--,d===o?f=void 0:(nt=f,f=o),f!==o?(t.length>nt?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(P)),d!==o?p=f=[f,d]:(nt=p,p=o)):(nt=p,p=o);p!==o;)u.push(p),p=nt,f=nt,lt++,D.test(t.charAt(nt))?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(L)),lt--,d===o?f=void 0:(nt=f,f=o),f!==o?(t.length>nt?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(P)),d!==o?p=f=[f,d]:(nt=p,p=o)):(nt=p,p=o);(c=u!==o?t.substring(c,nt):u)!==o?(ot=s,l=Y(0,0,l,c),s=l):(nt=s,s=o)}else nt=s,s=o;s===o&&(s=nt,(l="")!==o&&(ot=s,l=["","","",""]),s=l)}}s!==o?(ot=i,a=G(0,a,s),i=a):(nt=i,i=o)}else nt=i,i=o;for(i===o&&(i=nt,(a=Ct())!==o&&(ot=i,a=K(0,a)),(i=a)===o&&(i=nt,a=nt,s=nt,l=nt,lt++,41===t.charCodeAt(nt)?(c=")",nt++):(c=o,0===lt&&dt(g)),lt--,c===o?l=void 0:(nt=l,l=o),l!==o?(c=nt,lt++,u=bt(),lt--,u===o?c=void 0:(nt=c,c=o),c!==o?(t.length>nt?(u=t.charAt(nt),nt++):(u=o,0===lt&&dt(P)),u!==o?s=l=[l,c,u]:(nt=s,s=o)):(nt=s,s=o)):(nt=s,s=o),(a=s!==o?t.substring(a,nt):s)!==o&&(ot=i,a=V(0,a)),i=a));i!==o;){if(n.push(i),i=nt,a=nt,s=[],B.test(t.charAt(nt))?(l=t.charAt(nt),nt++):(l=o,0===lt&&dt(Q)),l!==o)for(;l!==o;)s.push(l),B.test(t.charAt(nt))?(l=t.charAt(nt),nt++):(l=o,0===lt&&dt(Q));else s=o;if((a=s!==o?t.substring(a,nt):s)!==o){if(s=nt,61===t.charCodeAt(nt)?(l="=",nt++):(l=o,0===lt&&dt(C)),l!==o)if(34===t.charCodeAt(nt)?(c='"',nt++):(c=o,0===lt&&dt(h)),c!==o){for(u=nt,p=[],f=nt,d=nt,lt++,34===t.charCodeAt(nt)?(y='"',nt++):(y=o,0===lt&&dt(h)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);f!==o;)p.push(f),f=nt,d=nt,lt++,34===t.charCodeAt(nt)?(y='"',nt++):(y=o,0===lt&&dt(h)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);(u=p!==o?t.substring(u,nt):p)!==o?(34===t.charCodeAt(nt)?(p='"',nt++):(p=o,0===lt&&dt(h)),p===o&&(p=nt,(f=xt())!==o&&(ot=p,f=""),p=f),p!==o?(ot=s,l=J(0,0,l,c,u,p),s=l):(nt=s,s=o)):(nt=s,s=o)}else nt=s,s=o;else nt=s,s=o;if(s===o){if(s=nt,61===t.charCodeAt(nt)?(l="=",nt++):(l=o,0===lt&&dt(C)),l!==o)if(39===t.charCodeAt(nt)?(c="'",nt++):(c=o,0===lt&&dt(m)),c!==o){for(u=nt,p=[],f=nt,d=nt,lt++,39===t.charCodeAt(nt)?(y="'",nt++):(y=o,0===lt&&dt(m)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);f!==o;)p.push(f),f=nt,d=nt,lt++,39===t.charCodeAt(nt)?(y="'",nt++):(y=o,0===lt&&dt(m)),lt--,y===o?d=void 0:(nt=d,d=o),d!==o?(t.length>nt?(y=t.charAt(nt),nt++):(y=o,0===lt&&dt(P)),y!==o?f=d=[d,y]:(nt=f,f=o)):(nt=f,f=o);(u=p!==o?t.substring(u,nt):p)!==o?(39===t.charCodeAt(nt)?(p="'",nt++):(p=o,0===lt&&dt(m)),p===o&&(p=nt,(f=xt())!==o&&(ot=p,f=""),p=f),p!==o?(ot=s,l=J(0,0,l,c,u,p),s=l):(nt=s,s=o)):(nt=s,s=o)}else nt=s,s=o;else nt=s,s=o;if(s===o){if(s=nt,61===t.charCodeAt(nt)?(l="=",nt++):(l=o,0===lt&&dt(C)),l!==o){for(c=nt,u=[],p=nt,f=nt,lt++,D.test(t.charAt(nt))?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(L)),lt--,d===o?f=void 0:(nt=f,f=o),f!==o?(t.length>nt?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(P)),d!==o?p=f=[f,d]:(nt=p,p=o)):(nt=p,p=o);p!==o;)u.push(p),p=nt,f=nt,lt++,D.test(t.charAt(nt))?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(L)),lt--,d===o?f=void 0:(nt=f,f=o),f!==o?(t.length>nt?(d=t.charAt(nt),nt++):(d=o,0===lt&&dt(P)),d!==o?p=f=[f,d]:(nt=p,p=o)):(nt=p,p=o);(c=u!==o?t.substring(c,nt):u)!==o?(ot=s,l=Y(0,0,l,c),s=l):(nt=s,s=o)}else nt=s,s=o;s===o&&(s=nt,(l="")!==o&&(ot=s,l=["","","",""]),s=l)}}s!==o?(ot=i,a=G(0,a,s),i=a):(nt=i,i=o)}else nt=i,i=o;i===o&&(i=nt,(a=Ct())!==o&&(ot=i,a=K(0,a)),(i=a)===o&&(i=nt,a=nt,s=nt,l=nt,lt++,41===t.charCodeAt(nt)?(c=")",nt++):(c=o,0===lt&&dt(g)),lt--,c===o?l=void 0:(nt=l,l=o),l!==o?(c=nt,lt++,u=bt(),lt--,u===o?c=void 0:(nt=c,c=o),c!==o?(t.length>nt?(u=t.charAt(nt),nt++):(u=o,0===lt&&dt(P)),u!==o?s=l=[l,c,u]:(nt=s,s=o)):(nt=s,s=o)):(nt=s,s=o),(a=s!==o?t.substring(a,nt):s)!==o&&(ot=i,a=V(0,a)),i=a))}n!==o?(41===t.charCodeAt(nt)?(i=")",nt++):(i=o,0===lt&&dt(g)),i===o&&(i=nt,a=nt,lt++,s=bt(),lt--,s!==o?(nt=a,a=void 0):a=o,a!==o&&(ot=i,a=""),i=a),i!==o?(ot=e,e=r={_type:"parenthesis",left:r,content:n,right:i}):(nt=e,e=o)):(nt=e,e=o)}else nt=e,e=o;e===o&&(e=nt,46===t.charCodeAt(nt)?(r=".",nt++):(r=o,0===lt&&dt(W)),r===o&&(r=""),r!==o&&(ot=e,r={_type:"separator",separator:r}),e=r);return e}())!==o&&(a=yt())!==o&&(s=function(){var t,e;t=nt,(e=bt())!==o&&(ot=t,r=e,wt.pop(),e=r);var r;return t=e}())!==o?(ot=e,r={type:"element",lbm:r,name:n,attributes:i,children:a,rbm:s,location:ct()},e=r):(nt=e,e=o);return e}())===o&&(e=function(){var e,r,n,i,a;e=nt,(r=function(){var e,r,n,i;e=nt,96===t.charCodeAt(nt)?(r="`",nt++):(r=o,0===lt&&dt(Z));if(r!==o){for(n=[],60===t.charCodeAt(nt)?(i="<",nt++):(i=o,0===lt&&dt(l));i!==o;)n.push(i),60===t.charCodeAt(nt)?(i="<",nt++):(i=o,0===lt&&dt(l));n!==o?(ot=e,a=r,Et=(s=n).length+1,r=a+s.join(""),e=r):(nt=e,e=o)}else nt=e,e=o;var a,s;return e}())!==o&&(n=function(){var e;46===t.charCodeAt(nt)?(e=".",nt++):(e=o,0===lt&&dt(W));e===o&&(e="");return e}())!==o&&(i=function(){var e,r,n,i,a;e=nt,r=[],n=nt,i=nt,lt++,a=Tt(),lt--,a===o?i=void 0:(nt=i,i=o);i!==o?(t.length>nt?(a=t.charAt(nt),nt++):(a=o,0===lt&&dt(P)),a!==o?(ot=n,n=i=a):(nt=n,n=o)):(nt=n,n=o);for(;n!==o;)r.push(n),n=nt,i=nt,lt++,a=Tt(),lt--,a===o?i=void 0:(nt=i,i=o),i!==o?(t.length>nt?(a=t.charAt(nt),nt++):(a=o,0===lt&&dt(P)),a!==o?(ot=n,n=i=a):(nt=n,n=o)):(nt=n,n=o);r!==o&&(ot=e,r=tt(r));return e=r}())!==o&&(a=Tt())!==o?(ot=e,r={type:"verbatim",lvm:r,separator:n,child:i,rvm:a,location:ct()},e=r):(nt=e,e=o);return e}())===o&&(e=function(){var e,r,n,i,a,s,l;e=nt,r=[],n=nt,i=nt,lt++,a=vt(),lt--,a===o?i=void 0:(nt=i,i=o);i!==o?(a=nt,lt++,s=bt(),lt--,s===o?a=void 0:(nt=a,a=o),a!==o?(s=nt,lt++,96===t.charCodeAt(nt)?(l="`",nt++):(l=o,0===lt&&dt(Z)),lt--,l===o?s=void 0:(nt=s,s=o),s!==o?(t.length>nt?(l=t.charAt(nt),nt++):(l=o,0===lt&&dt(P)),l!==o?(ot=n,n=i=l):(nt=n,n=o)):(nt=n,n=o)):(nt=n,n=o)):(nt=n,n=o);if(n!==o)for(;n!==o;)r.push(n),n=nt,i=nt,lt++,a=vt(),lt--,a===o?i=void 0:(nt=i,i=o),i!==o?(a=nt,lt++,s=bt(),lt--,s===o?a=void 0:(nt=a,a=o),a!==o?(s=nt,lt++,96===t.charCodeAt(nt)?(l="`",nt++):(l=o,0===lt&&dt(Z)),lt--,l===o?s=void 0:(nt=s,s=o),s!==o?(t.length>nt?(l=t.charAt(nt),nt++):(l=o,0===lt&&dt(P)),l!==o?(ot=n,n=i=l):(nt=n,n=o)):(nt=n,n=o)):(nt=n,n=o)):(nt=n,n=o);else r=o;r!==o&&(ot=e,r=tt(r));return e=r}()),e}function vt(){var e,r,n,i,a,c;if(e=nt,91===t.charCodeAt(nt)?(r="[",nt++):(r=o,0===lt&&dt(s)),r!==o){for(n=nt,i=[],60===t.charCodeAt(nt)?(a="<",nt++):(a=o,0===lt&&dt(l));a!==o;)i.push(a),60===t.charCodeAt(nt)?(a="<",nt++):(a=o,0===lt&&dt(l));(n=i!==o?t.substring(n,nt):i)!==o?(ot=nt,c=n,(i=(i=(wt[wt.length-1]||0)<=c.length+1)?void 0:o)!==o?(ot=e,e=r=function(t,e){return t+e}(r,n)):(nt=e,e=o)):(nt=e,e=o)}else nt=e,e=o;return e}function bt(){var e,r,n,i,a;for(e=nt,r=nt,n=[],62===t.charCodeAt(nt)?(i=">",nt++):(i=o,0===lt&&dt(E));i!==o;)n.push(i),62===t.charCodeAt(nt)?(i=">",nt++):(i=o,0===lt&&dt(E));return(r=n!==o?t.substring(r,nt):n)!==o?(93===t.charCodeAt(nt)?(n="]",nt++):(n=o,0===lt&&dt(X)),n!==o?(ot=nt,a=r,(i=(i=(wt[wt.length-1]||0)==a.length+1)?void 0:o)!==o?(ot=e,e=r=function(t,e){return t+e}(r,n)):(nt=e,e=o)):(nt=e,e=o)):(nt=e,e=o),e===o&&(e=nt,(r=xt())!==o&&(ot=e,r=""),e=r),e}function xt(){var e,r;return e=nt,lt++,t.length>nt?(r=t.charAt(nt),nt++):(r=o,0===lt&&dt(P)),lt--,r===o?e=void 0:(nt=e,e=o),e}function Tt(){var e,r,n;for(e=nt,r=[],62===t.charCodeAt(nt)?(n=">",nt++):(n=o,0===lt&&dt(E));n!==o;)r.push(n),62===t.charCodeAt(nt)?(n=">",nt++):(n=o,0===lt&&dt(E));return r!==o?(96===t.charCodeAt(nt)?(n="`",nt++):(n=o,0===lt&&dt(Z)),n!==o?(ot=nt,(Et==r.length+1?void 0:o)!==o?(ot=e,e=r=function(t,e){return t.join("")+e}(r,n)):(nt=e,e=o)):(nt=e,e=o)):(nt=e,e=o),e===o&&(e=nt,(r=xt())!==o&&(ot=e,r=""),e=r),e}function Ct(){var e,r,n;if(e=nt,r=[],et.test(t.charAt(nt))?(n=t.charAt(nt),nt++):(n=o,0===lt&&dt(rt)),n!==o)for(;n!==o;)r.push(n),et.test(t.charAt(nt))?(n=t.charAt(nt),nt++):(n=o,0===lt&&dt(rt));else r=o;return e=r!==o?t.substring(e,nt):r}var Et,wt=[];if((r=a())!==o&&nt===t.length)return r;throw r!==o&&nt<t.length&&dt({type:"end"}),mt(st,at<t.length?t.charAt(at):null,at<t.length?ft(at,at+1):ft(at,at))}}},function(t,e,r){var{Node:n,TextNode:o,HtmlNode:i,ErrorNode:a,ElementClass:s,Element:l}=r(0),c=r(6),h=r(1),u=new s({name:"[root]",display:"container-block",render:t=>t.html(t.innerHtml)});t.exports={ast2nt:function(t,e){e||(e={}),e.tags||(e.tags={});var r=h.tags(c,e.tags);return function t(n){if("root"==n.type)return u.instantiate({code:n.code,attributes:[],children:n.children.map(t),options:e});if("text"==n.type)return new o(n.text);if("error"==n.type)return new a({message:"Parser error",code:n.text});if("element"==n.type){if(n.name in r&&r[n.name]){if(r[n.name].split){var i=(e,r)=>{if(0==r.length)return e.map(t);var n,o=r[r.length-1],a=[];(e=e.map(t=>"element"!=t.type||t.name!=o||t.children.length?t:{type:"delimiter"})).length&&"text"==e[0].type&&!e[0].text.trim()&&(e=e.slice(1)),e.length&&"delimiter"==e[0].type||e.unshift({type:"delimiter"});for(var s=0;s<e.length;s++)"delimiter"==e[s].type?(n&&a.push(n),n=[]):n.push(e[s]);return a.push(n),a.map(t=>i(t,r.slice(0,-1)))};return r[n.name].instantiate({code:n.code,attributes:n.attributes,children:i(n.children,r[n.name].split),options:e})}return r[n.name].instantiate({code:n.code,attributes:n.attributes,children:n.children.map(t),options:e})}return new a({message:n.name?`Undefined tag name [${n.name}]`:"No tag name",code:n.code})}throw TypeError(n.type)}(t.root)},Node:n,TextNode:o,HtmlNode:i,ErrorNode:a,ElementClass:s,Element:l}},function(t,e,r){var{ElementClass:n}=r(0),o={};function i(t){return t=t.trim(),/^#/.test(t)?!!/^#[^\s]*$/.test(t)&&t:/^(\/|\.\/|\.\.\/)/.test(t)?!!/^(\/|\.\/|\.\.\/)[^\s]*$/.test(t)&&t:(/^(http:\/\/|https:\/\/|ftp:\/\/)/.test(t)||(t="http://"+t),!!/^(http:\/\/|https:\/\/|ftp:\/\/)[a-z0-9]+(-+[a-z0-9]+)*(\.[a-z0-9]+(-+[a-z0-9]+)*)+\.?(:[0-9]{1,5})?(\/[^\s]*)?$/.test(t)&&t)}o.comment=new n({name:"comment",display:"inline",render:t=>t.text("")}),o.entity=new n({name:"entity",display:"inline",render:t=>t.innerIsText?/^([a-z]{1,50}|#[0-9]{1,10}|#x[0-9a-f]{1,10})$/i.test(t.innerText)?t.html(`&${t.innerText};`):t.error("Invalid value"):t.error("Non-text input")}),["b","code","i","u","sup","sub"].forEach(t=>o[t]=new n({name:t,display:"inline",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),["h1","h2","h3","h4","h5","h6","p"].forEach(t=>o[t]=new n({name:t,display:"leaf-block",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),o.blockquote=new n({name:"blockquote",display:"container-block",render:t=>{var e=t.getAttribute("type");return["info","warn"].includes(e)?t.html(`<blockquote class="m42kup-bq-${e}">${t.innerHtml}</blockquote>`):t.html(`<blockquote>${t.innerHtml}</blockquote>`)}}),["br"].forEach(t=>o[t]=new n({name:t,display:"inline",render:e=>e.html(`<${t}>${e.innerHtml}`)})),["hr"].forEach(t=>o[t]=new n({name:t,display:"leaf-block",render:e=>e.html(`<${t}>${e.innerHtml}`)})),["ul","ol"].forEach(t=>{o[t]=new n({name:t,display:"container-block",split:"*",render:e=>e.html(`<${t}>`+e.innerHtml.map(t=>`<li>${t}</li>`).join("")+`</${t}>`)})}),o.table=new n({name:"table",display:"container-block",split:["*","**"],render:t=>{var e=t.innerHtml.map(t=>t.length).reduce((t,e)=>t<e?e:t);return t.html("<table>"+t.innerHtml.map(t=>`<tr>${t.concat(Array(e-t.length).fill("")).map(t=>`<td>${t}</td>`).join("")}</tr>`).join("")+"</table>")}}),o.blockcode=new n({name:"blockcode",display:"leaf-block",render:t=>{var e=t.innerHtml.replace(/(^[ \t]*(\r\n|\r|\n))|((\r\n|\r|\n)[ \t]*$)/g,"");return t.html(`<pre><code>${e}\n</code></pre>`)}}),o.bi=new n({name:"bi",display:"inline",render:t=>t.html(`<i><b>${t.innerHtml}</b></i>`)}),o.link=new n({name:"link",display:"inline",render:t=>{var e=t.getAttribute("href");if(null==e){if(!t.innerIsText)return t.error("Non-text input");let e=i(t.innerText);if(!e)return t.error("Invalid URL");let r=t.escapeHtml(e);return t.html(`<a href="${r}" title="${r}">${r}</a>`)}{let r=i(e);if(!r)return t.error("Invalid URL");let n=t.escapeHtml(r);return t.html(`<a href="${n}" title="${n}">${t.innerHtml}</a>`)}}}),o.img=new n({name:"img",display:"leaf-block",render:t=>{if(!t.innerIsText)return t.error("Non-text input");var e=i(t.innerText);if(!e)return t.error("Invalid URL");var r=t.escapeHtml(e);return t.html(`<img src="${r}">`)}}),["squote","dquote"].forEach(t=>o[t]=new n({name:t,display:"inline",render:e=>{var r={squote:{normal:["‘","’"],angle:["〈","〉"],corner:["「","」"]},dquote:{normal:["“","”"],angle:["《","》"],corner:["『","』"]}},n=e.getAttribute("type");return["angle","corner"].includes(n)||(n="normal"),e.html(`${r[t][n][0]}${e.innerHtml}${r[t][n][1]}`)}})),o.highlight=new n({name:"highlight",display:"leaf-block",render:(t,e)=>{if(!e.hljs)return t.error("Element not implemented (options.highlight not given)");if(!t.innerIsText)return t.error("Non-text input");var r,n=["apache","bash","coffeescript","cpp","cs","css","diff","http","ini","java","javascript","json","makefile","xml","markdown","nginx","objectivec","perl","php","python","ruby","sql"],o=t.innerText.replace(/(^[ \t]*(\r\n|\r|\n))|((\r\n|\r|\n)[ \t]*$)/g,"");if(n.includes(t.getAttribute("lang"))){var i=t.getAttribute("lang");r=e.hljs.highlight(i,o).value}else r=e.hljs.highlightAuto(o,n).value;return t.html(`<pre class="hljs"><code>${r}\n</code></pre>`)}}),o.math=new n({name:"math",display:"inline",render:(t,e)=>{if(!e.katex)return t.error("Element not implemented (options.katex not given)");if(!t.innerIsText)return t.error("Non-text input");var r=e.katex.renderToString(t.innerText,{throwOnError:!1,displayMode:!1,strict:"error"});return t.html(r)}}),o.displaymath=new n({name:"displaymath",display:"leaf-block",render:(t,e)=>{if(!e.katex)return t.error("Element not implemented (options.katex not given)");if(!t.innerIsText)return t.error("Non-text input");var r=e.katex.renderToString(t.innerText,{throwOnError:!1,displayMode:!0,strict:"error"});return t.html(r)}});var a={'"':"dquote",$:"math",$$:"displaymath","%":"comment","&":"entity","'":"squote","*":"i","**":"b","***":"bi",";":"code",";;":"blockcode",";;;":"highlight","=":"h1","==":"h2","===":"h3","====":"h4","=====":"h5","======":"h6",">":"blockquote","\\":"br","^":"sup",_:"sub","~":"link","~~":"img"};for(var s in a){if(!o[a[s]])throw TypeError("aliasing failed");o[s]=o[a[s]]}t.exports=o},function(t,e){function r(t){return`<span class="m42hl-${t.type}">${t.html||(e=t.text,(e+"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])))}</span>`;var e}t.exports={pt2hl:function(t){return function t(e){for(var n="",o=0;o<e.length;o++)switch(e[o].type){case"text":n+=r({type:"tx",text:e[o].text});break;case"element":var i=r({type:"lbm",text:e[o].lbm})+r({type:"tn",text:e[o].name})+(t=>{switch(t._type){case"parenthesis":return r({type:"lpm",text:t.left})+t.content.map(t=>{switch(t._type){case"attribute":return r({type:"pk",text:t.attribute[0]})+r({type:"eq",text:t.attribute[1]})+r({type:"lqm",text:t.attribute[2]})+r({type:"pv",text:t.attribute[3]})+r({type:"rqm",text:t.attribute[4]});case"whitespace":return r({type:"tx",text:t.whitespace});case"error":return r({type:"err",text:t.error});default:throw Error("Unknown type")}}).join("")+r({type:"rpm",text:t.right});case"separator":return r({type:"sp",text:t.separator});default:throw Error("Unknown type")}})(e[o].attributes)+t(e[o].children)+r({type:"rbm",text:e[o].rbm});n+=r({type:"elem",html:i});break;case"verbatim":var a=r({type:"lvm",text:e[o].lvm+e[o].separator})+r({type:"tx",text:e[o].child.text})+r({type:"rvm",text:e[o].rvm});n+=r({type:"verb",html:a});break;default:throw new TypeError("Unknown type: "+e[o].type)}return n}(t.root.children)}}},function(t,e){STATE_ATTRIBUTE_DQUOTE=4,STATE_ATTRIBUTE_SQUOTE=5,t.exports=function(t){function e(t,e){if((e.levels[e.levels.length-1]||0)<0){var r=-e.levels[e.levels.length-1],n=">".repeat(r-1)+"`";return t.skipTo(n)?(t.match(n),e.levels.pop()):t.skipToEnd(),"comment"}var o=t.peek();if(![STATE_ATTRIBUTE_DQUOTE,STATE_ATTRIBUTE_SQUOTE].includes(e.status)&&[">","]"].includes(o)&&(s=e.levels[e.levels.length-1]||0)>0){var i=">".repeat(s-1)+"]";if(t.match(i))return e.levels.pop(),e.status=0,"tag"}if(0!=e.status){if(t.match(")"))return e.status=0,"tag";if(1==e.status)return t.match(/^[a-z0-9-]+/)?(e.status=2,"attribute"):t.match(/^[ \t\n\r]+/)?null:(t.next(),"error");if(2==e.status)return t.match("=")?(e.status=3,null):(e.status=1,null);if(3==e.status)return t.match('"')?(e.status=STATE_ATTRIBUTE_DQUOTE,"string"):t.match("'")?(e.status=STATE_ATTRIBUTE_SQUOTE,"string"):(t.match(/^[^'"()\[\] \t\n\r]*/),e.status=1,"string");if(e.status==STATE_ATTRIBUTE_DQUOTE)return t.skipTo('"')?(t.match('"'),e.status=1):t.skipToEnd(),"string";if(e.status==STATE_ATTRIBUTE_SQUOTE)return t.skipTo("'")?(t.match("'"),e.status=1):t.skipToEnd(),"string"}if("`"==o){t.next();for(var a=1;o=t.next();){if("<"!=o){t.backUp(1);break}a++}return e.levels.push(-a),"comment"}if("["==o){t.next();for(a=1;o=t.next();){if("<"!=o){t.backUp(1);break}a++}if(a<(e.levels[e.levels.length-1]||0))return null;if(t.match(/^(?:\!+|\"+|\#+|\$+|\%+|\&+|\'+|\)+|\*+|\++|\,+|\-+|\/+|\;+|\=+|\>+|\?+|\@+|\\+|\^+|\_+|\{+|\|+|\}+|\~+|[a-z][a-z0-9]*(?:\:[a-z][a-z0-9]*)*|)/),t.match("("))e.status=1;else{t.match(/^(?:[.]|)/i)}return e.levels.push(a),"tag"}if(">"==o||"]"==o){var s;if((s=e.levels[e.levels.length-1]||0)<=0)return t.next(),null;i=">".repeat(s-1)+"]";return t.match(i)?(e.levels.pop(),"tag"):(t.next(),null)}t.match(/^[^\[\]`>]+/)}t.defineMode("m42kup",(t,r)=>({startState:t=>({levels:[],status:0}),token:e}))}}]);